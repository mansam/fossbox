<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="foss@rit, ">

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.2.1/pure-min.css">
    <link rel="stylesheet" href="/theme/pure.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://use.typekit.net/ajf8ggy.js"></script>
    <script>
        try { Typekit.load(); } catch (e) {}
    </script>


        <title>Finally have time to start this project. // foss@rit // </title>
</head>

<body>
    <div class="pure-g-r content" id="layout">
        <div class="pure-u" id="nav">
            <a href="#" class="nav-menu-button">Menu</a>

            <div class="nav-inner">
                <h1>
                    <a class="logo" href=""><img id="profileimg" src="http://foss.rit.edu/files/logo.png" alt="foss@rit"></a>
                </h1>
                <div class="pure-menu pure-menu-open">
                    <ul>
                        <span class="pure-menu-heading">foss@rit</span>
                        <li><a href="/pages/about.html">About</a></li>
                        <li><a href="/projects">Projects</a></li>
                        <li><a href="/pages/research.html">Research</a></li>
                        <li><a href="/category/events.html">Events</a></li>
                        <li class="pure-menu-heading">Blogs</li>
                            <li><a href="/author/blitzkev.html"><span class="cat-label-blue"></span>Blitzkev</a></li>
                            <li><a href="/author/davesilver.html"><span class="cat-label-blue"></span>DaveSilver</a></li>
                            <li><a href="/author/decause.html"><span class="cat-label-blue"></span>decause</a></li>
                            <li><a href="/author/fortnight.html"><span class="cat-label-blue"></span>fortnight</a></li>
                            <li><a href="/author/imnotlistening.html"><span class="cat-label-blue"></span>imnotlistening</a></li>
                            <li><a href="/author/jenn.html"><span class="cat-label-blue"></span>Jenn</a></li>
                            <li><a href="/author/jlew.html"><span class="cat-label-blue"></span>jlew</a></li>
                            <li><a href="/author/jtmengel.html"><span class="cat-label-blue"></span>jtmengel</a></li>
                            <li><a href="/author/kayeight.html"><span class="cat-label-blue"></span>kayeight</a></li>
                            <li><a href="/author/qalthos.html"><span class="cat-label-blue"></span>Qalthos</a></li>
                            <li><a href="/author/ramstush.html"><span class="cat-label-blue"></span>ramstush</a></li>
                            <li><a href="/author/rberent.html"><span class="cat-label-blue"></span>rberent</a></li>
                            <li><a href="/author/rgk8573.html"><span class="cat-label-blue"></span>rgk8573</a></li>
                            <li><a href="/author/thengrad.html"><span class="cat-label-blue"></span>thengrad</a></li>
                            <li><a href="/author/tmr9209.html"><span class="cat-label-blue"></span>tmr9209</a></li>
                            <li><a href="/author/trose.html"><span class="cat-label-blue"></span>trose</a></li>
                            <li><a href="/author/wacker.html"><span class="cat-label-blue"></span>wacker</a></li>
                            <li><a href="/author/zanarama.html"><span class="cat-label-blue"></span>Zanarama</a></li>
                    </ul>
                </div>
            </div>
        </div>

    <div class="pure-u-3-4">
        <div class="article-content margin-blue">
            <div class="article-content-header pure-g">
                <div class="pure-u-1">
                    <h1 class="article-content-title">Finally have time to start this project.</h1>
                    <p class="article-content-subtitle">
                        by <a href="/author/imnotlistening.html">imnotlistening</a> on <span>Fri 16 March 2012</span>
                        // Posted in <a href="/category/legacy.html">legacy</a>
                            // under                                 <a class="post-category post-category-design" href="/tag/legacy.html">legacy</a>
                                <a class="post-category post-category-design" href="/tag/fossrit.html">foss@rit</a>
                    </p>
                </div>
            </div>
            <div class="article-content-body">
                <p>
                    <p>Finally... Its spring quarter and I have some time to get a native video chat
app running on an XO. There is a lot of talk about the OVC application created
by a couple of RIT students:
<a href="http://foss.rit.edu/projects/ovc">http://foss.rit.edu/projects/ovc</a>. While
they work on the python implementation, I am going to detail my progress
towards building a native C application.</p>
<p>To start of with, here is how I set up my development environment for
writing/compiling XO code. I don't know if there are better ways or not, but
this worked for me. This is all based on the guide posted here: <a href="http://wiki.laptop.org/
go/Compiling_C/C%2B%2B_program_for_the_OLPC">http://wiki.l
aptop.org/go/Compiling_C/C%2B%2B_program_for_the_OLPC</a>. Here are the basic steps (I will
describe each on more detail after):</p>
<p>`</p>
<ol>
<li>
<p>Build 32 bit VM for building code with a native XO file system copy.</p>
</li>
<li>
<p>Copy the XO file system from an XO onto the VM.</p>
</li>
<li>
<p>chroot into the copied XO file system.</p>
</li>
<li>
<p>Configure the XO chroot environment, install some dev software and
configure a user account to your liking.</p>
</li>
</ol>
<p>`</p>
<h3>1. Getting a 32 bit kernel running</h3>
<p>This step was necessary since I am running a 64 bit OS (Fedora 12) on my
machine. However, to chroot into a 32 bit device, the kernel's 32bitness must
match. Thus I needed a dev environment that used a 32 bit kernel. The easiest
way to do this was, by far, to make a 32 bit VM (Fedora 16).</p>
<h3>2. Copy the file system off the XO.</h3>
<p>To copy the data of the the XO, I copied from the XO to my computer via rsync.
I used the commands from the guide on wiki.laptop.org with a few changes:</p>
<p>On my desktop:</p>
<p>`</p>
<p>$ cd /mnt/dm-0/olpc-dev</p>
<p>$ mkdir olpc-root</p>
<p>$ mkdir -p olpc-root/proc</p>
<p>$ mkdir olpc-root/dev</p>
<p>$ su</p>
<h1>mknod olpc/dev/null c 1 3</h1>
<h1>chmod 666 olpc/dev/null</h1>
<p>`</p>
<p>On the XO:</p>
<p>`</p>
<p>$ su</p>
<h1>cd /</h1>
<h1>rsync -a bin sbin lib usr etc home var australia.student.rit.edu:/mnt/dm-0</h1>
<p>/olpc-dev/olpc-root</p>
<h1>rsync -a proc/cpuinfo australia.student.rit.edu:/mnt/dm-0/olpc-dev/olpc-</h1>
<p>root/proc</p>
<p>`</p>
<p>At this point, I had all the important stuff for compiling against an OLPC
laptop on my 64 bit desktop. From there I copied the FS I had built verbatim
to the 32 bit VM.</p>
<h3>3. chroot</h3>
<p>This sets me up in a shell that is effectively running on an XO laptop only
the underlying hardware is a little more beefy. Not much though, my VM is not
particularly quick. However, there is enough disk space to compile lots of
libraries and the like. On the 32 bit VM:</p>
<p>`</p>
<p>$ su</p>
<h1>chroot olpc-root</h1>
<h1></h1>
<p>`</p>
<h3>4. Configuring a user account for myself</h3>
<p>Now that I have a chroot'able build environment for cross compiling (well,
sort of cross compiling) I installed some software using yum; some was
necessary for development, some just for comfort and ease of use.</p>
<p>Necessary software (may already be installed though):</p>
<ul>
<li>gcc  </li>
<li>make  </li>
<li>glib-devel  </li>
<li>gtk2-devel</li>
</ul>
<p>Comfort software:</p>
<ul>
<li>zsh  </li>
<li>emacs</li>
</ul>
<h3>Notes</h3>
<p>Unfortunately the 32 bit VM along with a chroot environment is pretty slow.
Unfortunately for my setup there really is nothing I can do about this other
than installing a native 32 bit system. But I don't want to go there.</p>
<p>For now at least, this has accomplished everything I have needed for
developing C code against gtk. I will go into more detail on how I compiled
and installed the latest telepathy library and dependencies.</p>
                </p>
                <div class="comments">
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                        var disqus_identifier = "articles/imnotlistening/finally-have-time-to-start-this-project";
                        (function() {
                            var dsq = document.createElement('script');
                            dsq.type = 'text/javascript';
                            dsq.async = true;
                            dsq.src = 'http://fossritedu.disqus.com/embed.js';
                            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                        })();
                    </script>
                    <noscript>Please enable JavaScript to view <a href="http://disqus.com/?ref_noscript">comments</a>.</noscript>
                </div>
 
            </div>
        </div>
    </div>

        <div class="pure-u-3-4">
            <footer class="footer">
                <p>&copy; foss@rit &ndash;
                    Built with <a href="https://github.com/danclaudiupop/pure">Pure Theme</a>
                    for <a href="http://blog.getpelican.com/">Pelican</a>
                </p>
                <p>Licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_GB">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>
                <a href="#" class="go-top">Go Top</a>
            </footer>
        </div>

    <script src="http://yui.yahooapis.com/3.10.1/build/yui/yui-min.js"></script>
    <script>
        YUI().use('node-base', 'node-event-delegate', function (Y) {

            var menuButton = Y.one('.nav-menu-button'),
                nav        = Y.one('#nav');

            // Setting the active class name expands the menu vertically on small screens.
            menuButton.on('click', function (e) {
                nav.toggleClass('active');
            });

            // Your application code goes here...

        });
    </script>
    <script>
        YUI().use('node-base', 'node-event-delegate', function (Y) {
            // This just makes sure that the href="#" attached to the <a> elements
            // don't scroll you back up the page.
            Y.one('body').delegate('click', function (e) {
                e.preventDefault();
            }, 'a[href="#"]');
        });
    </script>
    <script>
        $(document).ready(function() {
            // Show or hide the sticky footer button
            $(window).scroll(function() {
                if ($(this).scrollTop() > 200) {
                    $('.go-top').fadeIn(200);
                } else {
                    $('.go-top').fadeOut(200);
                }
            });

            // Animate the scroll to top
            $('.go-top').click(function(event) {
                event.preventDefault();

                $('html, body').animate({scrollTop: 0}, 300);
            })
        });
    </script>

</body>
</html>