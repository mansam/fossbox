<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="foss@rit, ">

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.2.1/pure-min.css">
    <link rel="stylesheet" href="/theme/pure.css">

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://use.typekit.net/ajf8ggy.js"></script>
    <script>
        try { Typekit.load(); } catch (e) {}
    </script>


        <title>Empathy code base // foss@rit // </title>
</head>

<body>
    <div class="pure-g-r content" id="layout">
        <div class="pure-u" id="nav">
            <a href="#" class="nav-menu-button">Menu</a>

            <div class="nav-inner">
                <h1>
                    <a class="logo" href=""><img id="profileimg" src="" alt="foss@rit"></a>
                </h1>
                <div class="pure-menu pure-menu-open">
                    <ul>
                        <span class="pure-menu-heading">foss@rit</span>
                            <li><a href="/pages/about.html">About</a></li>
                            <li><a href="/pages/news.html">News</a></li>
                            <li><a href="/pages/research.html">Research</a></li>
                        <li class="pure-menu-heading">Categories</li>
                            <li><a href="/category/legacy.html"><span class="cat-label-yellow"<span class="cat-label-blue"></span>legacy</a></li>
                    </ul>
                </div>
            </div>
        </div>

    <div class="pure-u-3-4">
        <div class="article-content margin-blue">
            <div class="article-content-header pure-g">
                <div class="pure-u-1">
                    <h1 class="article-content-title">Empathy code base</h1>
                    <p class="article-content-subtitle">
                        by <a href="/author/imnotlistening.html">imnotlistening</a> on <span>Mon 23 April 2012</span>
                        // Posted in <a href="/category/legacy.html">legacy</a>
                            // under                                 <a class="post-category post-category-design" href="/tag/legacy.html">legacy</a>
                                <a class="post-category post-category-design" href="/tag/fossrit.html">foss@rit</a>
                    </p>
                </div>
            </div>
            <div class="article-content-body">
                <p>
                    <p>So, now that I have been hacking away, here is what I am working on.</p>
<p>The first aspect of setting up a Sugar App is parsing some command line
arguments. The arguments help configure the app so that the Sugar Framework
can properly interface between the App and the X server. Or something like
that. These arguments are:</p>
<p>`</p>
<p>-b, --bundle-id<br />
Identifier of the activity bundle. Must be made available as window property.</p>
<p>-a, --activity-id<br />
Unique identifier of the activity instance. Must be made available as window
property, and is used to create the D-Bus service.</p>
<p>`</p>
<p>(See the rest here: <a href="http://wiki.sugarlabs.org/go/Development_Team/Low-
level_Activity_API#Command_Line_Arguments">http://wiki.sugarlabs.org/go/Development_Team/Low-
level_Activity_API#Com...</a>)</p>
<p>These two arguments, the only two that are relevant to Empathy - though the
data store arg will have to not crash Empathy - are passed to any sugar app to
set up DBus and X. My patch hooks into the argument parsing code in Empathy so
that when these arguments are passed, the following environment variables are
set to the passed argument string: <code>_SUGAR_BUNDLE_ID</code> and
<code>_SUGAR_ACTIVITY_ID</code>.</p>
<p>Empathy is a pretty complex app, so it is no surprise that parsing arguments
is not as simple as a simple app would have it. Empathy uses a GApplication
framework; and has multiple different programs running simultaneously. As such
argument parsing has to be accomplished in a GApplication specific way. Mostly
it is a wrapper for the typical getopt(_long) style C argument parser but its
a little more in depth since these arguments are being parsed across multiple
processes. Also I am not sure how to handle the derivative programs, e.g: the
calling window program. They are independent programs but not really
independent apps; however, Suagr won't really understand that, I don't think.</p>
<p>But yeah, at least I am making some progress on this patch.</p>
                </p>
 
            </div>
        </div>
    </div>

        <div class="pure-u-3-4">
            <footer class="footer">
                <p>&copy; foss@rit &ndash;
                    Built with <a href="https://github.com/danclaudiupop/pure">Pure Theme</a>
                    for <a href="http://blog.getpelican.com/">Pelican</a>
                </p>
                <p>Licensed under <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_GB">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>
                <a href="#" class="go-top">Go Top</a>
            </footer>
        </div>

    <script src="http://yui.yahooapis.com/3.10.1/build/yui/yui-min.js"></script>
    <script>
        YUI().use('node-base', 'node-event-delegate', function (Y) {

            var menuButton = Y.one('.nav-menu-button'),
                nav        = Y.one('#nav');

            // Setting the active class name expands the menu vertically on small screens.
            menuButton.on('click', function (e) {
                nav.toggleClass('active');
            });

            // Your application code goes here...

        });
    </script>
    <script>
        YUI().use('node-base', 'node-event-delegate', function (Y) {
            // This just makes sure that the href="#" attached to the <a> elements
            // don't scroll you back up the page.
            Y.one('body').delegate('click', function (e) {
                e.preventDefault();
            }, 'a[href="#"]');
        });
    </script>
    <script>
        $(document).ready(function() {
            // Show or hide the sticky footer button
            $(window).scroll(function() {
                if ($(this).scrollTop() > 200) {
                    $('.go-top').fadeIn(200);
                } else {
                    $('.go-top').fadeOut(200);
                }
            });

            // Animate the scroll to top
            $('.go-top').click(function(event) {
                event.preventDefault();

                $('html, body').animate({scrollTop: 0}, 300);
            })
        });
    </script>

</body>
</html>